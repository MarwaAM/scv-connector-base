!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SCVConnectorBase",[],e):"object"==typeof exports?exports.SCVConnectorBase=e():t.SCVConnectorBase=e()}(this,(function(){return function(t){var e={};function E(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,E),a.l=!0,a.exports}return E.m=t,E.c=e,E.d=function(t,e,r){E.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},E.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},E.t=function(t,e){if(1&e&&(t=E(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(E.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)E.d(r,a,function(e){return t[e]}.bind(null,a));return r},E.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return E.d(e,"a",e),e},E.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},E.p="",E(E.s=7)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,E){return e in t?Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}):t[e]=E,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){t.exports=E(6)},function(t,e){function E(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=E=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=E=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),E(e)}t.exports=E,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function E(t,e,E,r,a,n,T){try{var _=t[n](T),o=_.value}catch(t){return void E(t)}_.done?e(o):Promise.resolve(o).then(r,a)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(a,n){var T=t.apply(e,r);function _(t){E(T,a,n,_,o,"next",t)}function o(t){E(T,a,n,_,o,"throw",t)}_(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function E(t,e){for(var E=0;E<e.length;E++){var r=e[E];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&E(t.prototype,e),r&&E(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,E){var r=function(t){"use strict";var e=Object.prototype,E=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",T=r.toStringTag||"@@toStringTag";function _(t,e,E){return Object.defineProperty(t,e,{value:E,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{_({},"")}catch(t){_=function(t,e,E){return t[e]=E}}function o(t,e,E,r){var a=e&&e.prototype instanceof s?e:s,n=Object.create(a.prototype),T=new S(r||[]);return n._invoke=function(t,e,E){var r="suspendedStart";return function(a,n){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw n;return h()}for(E.method=a,E.arg=n;;){var T=E.delegate;if(T){var _=d(T,E);if(_){if(_===N)continue;return _}}if("next"===E.method)E.sent=E._sent=E.arg;else if("throw"===E.method){if("suspendedStart"===r)throw r="completed",E.arg;E.dispatchException(E.arg)}else"return"===E.method&&E.abrupt("return",E.arg);r="executing";var o=i(t,e,E);if("normal"===o.type){if(r=E.done?"completed":"suspendedYield",o.arg===N)continue;return{value:o.arg,done:E.done}}"throw"===o.type&&(r="completed",E.method="throw",E.arg=o.arg)}}}(t,E,T),n}function i(t,e,E){try{return{type:"normal",arg:t.call(e,E)}}catch(t){return{type:"throw",arg:t}}}t.wrap=o;var N={};function s(){}function c(){}function A(){}var l={};l[a]=function(){return this};var R=Object.getPrototypeOf,u=R&&R(R(p([])));u&&u!==e&&E.call(u,a)&&(l=u);var P=A.prototype=s.prototype=Object.create(l);function O(t){["next","throw","return"].forEach((function(e){_(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){var r;this._invoke=function(a,n){function T(){return new e((function(r,T){!function r(a,n,T,_){var o=i(t[a],t,n);if("throw"!==o.type){var N=o.arg,s=N.value;return s&&"object"==typeof s&&E.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,T,_)}),(function(t){r("throw",t,T,_)})):e.resolve(s).then((function(t){N.value=t,T(N)}),(function(t){return r("throw",t,T,_)}))}_(o.arg)}(a,n,r,T)}))}return r=r?r.then(T,T):T()}}function d(t,e){var E=t.iterator[e.method];if(void 0===E){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,d(t,e),"throw"===e.method))return N;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return N}var r=i(E,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,N;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,N):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,N)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function p(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(E.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:h}}function h(){return{value:void 0,done:!0}}return c.prototype=P.constructor=A,A.constructor=c,c.displayName=_(A,T,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===c||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,A):(t.__proto__=A,_(t,T,"GeneratorFunction")),t.prototype=Object.create(P),t},t.awrap=function(t){return{__await:t}},O(C.prototype),C.prototype[n]=function(){return this},t.AsyncIterator=C,t.async=function(e,E,r,a,n){void 0===n&&(n=Promise);var T=new C(o(e,E,r,a),n);return t.isGeneratorFunction(E)?T:T.next().then((function(t){return t.done?t.value:T.next()}))},O(P),_(P,T,"Generator"),P[a]=function(){return this},P.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var E in t)e.push(E);return e.reverse(),function E(){for(;e.length;){var r=e.pop();if(r in t)return E.value=r,E.done=!1,E}return E.done=!0,E}},t.values=p,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&E.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(E,r){return T.type="throw",T.arg=t,e.next=E,r&&(e.method="next",e.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],T=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var _=E.call(n,"catchLoc"),o=E.call(n,"finallyLoc");if(_&&o){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(_){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&E.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var T=n?n.completion:{};return T.type=t,T.arg=e,n?(this.method="next",this.next=n.finallyLoc,N):this.complete(T)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),N},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.finallyLoc===t)return this.complete(E.completion,E.afterLoc),L(E),N}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var E=this.tryEntries[e];if(E.tryLoc===t){var r=E.completion;if("throw"===r.type){var a=r.arg;L(E)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,E){return this.delegate={iterator:p(t),resultName:e,nextLoc:E},"next"===this.method&&(this.arg=void 0),N}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,E){"use strict";E.r(e),E.d(e,"initializeConnector",(function(){return tt})),E.d(e,"publishEvent",(function(){return Et})),E.d(e,"publishError",(function(){return et})),E.d(e,"Constants",(function(){return d})),E.d(e,"ActiveCallsResult",(function(){return S})),E.d(e,"AgentConfigResult",(function(){return p})),E.d(e,"AgentConfig",(function(){return h})),E.d(e,"RecordingToggleResult",(function(){return G})),E.d(e,"ParticipantResult",(function(){return D})),E.d(e,"SignedRecordingUrlResult",(function(){return U})),E.d(e,"PhoneContactsResult",(function(){return f})),E.d(e,"CallResult",(function(){return b})),E.d(e,"HangupResult",(function(){return v})),E.d(e,"HoldToggleResult",(function(){return Y})),E.d(e,"InitResult",(function(){return g})),E.d(e,"GenericResult",(function(){return y})),E.d(e,"MuteToggleResult",(function(){return L})),E.d(e,"LogoutResult",(function(){return V})),E.d(e,"CallInfo",(function(){return M})),E.d(e,"PhoneCall",(function(){return x})),E.d(e,"PhoneCallAttributes",(function(){return H})),E.d(e,"Contact",(function(){return m})),E.d(e,"Phone",(function(){return I})),E.d(e,"AgentStatusInfo",(function(){return w}));var r=E(1),a=E.n(r),n=E(4),T=E.n(n),_=E(2),o=E.n(_),i={MESSAGE_TYPE:{SETUP_CONNECTOR:"SETUP_CONNECTOR",CONNECTOR_READY:"CONNECTOR_READY",LOG:"LOG",TELEPHONY_EVENT_DISPATCHED:"TELEPHONY_EVENT_DISPATCHED",ACCEPT_CALL:"ACCEPT_CALL",DECLINE_CALL:"DECLINE_CALL",END_CALL:"END_CALL",MUTE:"MUTE",UNMUTE:"UNMUTE",HOLD:"HOLD",RESUME:"RESUME",SET_AGENT_STATUS:"SET_AGENT_STATUS",DIAL:"DIAL",SEND_DIGITS:"SEND_DIGITS",GET_PHONE_CONTACTS:"GET_PHONE_CONTACTS",SWAP_PARTICIPANTS:"SWAP_PARTICIPANTS",ADD_PARTICIPANT:"ADD_PARTICIPANT",CONFERENCE:"CONFERENCE",PAUSE_RECORDING:"PAUSE_RECORDING",RESUME_RECORDING:"RESUME_RECORDING",LOGOUT:"LOGOUT",MESSAGE:"MESSAGE",WRAP_UP_CALL:"WRAP_UP_CALL",AGENT_AVAILABLE:"AGENT_AVAILABLE",SET_AGENT_CONFIG:"SET_AGENT_CONFIG",GET_SIGNED_RECORDING_URL:"GET_SIGNED_RECORDING_URL"},EVENT_TYPE:{QUEUED_CALL_STARTED:"QUEUED_CALL_STARTED",CALL_STARTED:"CALL_STARTED",CALL_CONNECTED:"CALL_CONNECTED",CALL_FAILED:"CALL_FAILED",MUTE_TOGGLE:"MUTE_TOGGLE",HOLD_TOGGLE:"HOLD_TOGGLE",HANGUP:"HANGUP",ERROR:"ERROR",PHONE_CONTACTS:"PHONE_CONTACTS",PARTICIPANT_ADDED:"PARTICIPANT_ADDED",PARTICIPANT_CONNECTED:"PARTICIPANT_CONNECTED",PARTICIPANT_REMOVED:"PARTICIPANT_REMOVED",LOGIN_STARTED:"LOGIN_STARTED",LOGIN_RESULT:"LOGIN_RESULT",LOGOUT_RESULT:"LOGOUT_RESULT",RECORDING_TOGGLE:"RECORDING_TOGGLE",PARTICIPANTS_SWAPPED:"PARTICIPANTS_SWAPPED",PARTICIPANTS_CONFERENCED:"PARTICIPANTS_CONFERENCED",SHOW_LOGIN:"SHOW_LOGIN",SET_AGENT_STATUS_RESULT:"SET_AGENT_STATUS_RESULT",WRAP_UP_ENDED:"WRAP_UP_ENDED",MESSAGE:"MESSAGE",AFTER_CALL_WORK_STARTED:"AFTER_CALL_WORK_STARTED",AGENT_CONFIG_UPDATED:"AGENT_CONFIG_UPDATED",ERROR_RESULT:"ERROR_RESULT",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL"},ERROR_TYPE:{GENERIC_ERROR:"GENERIC_ERROR",AGENT_ERROR:"AGENT_ERROR",MICROPHONE_NOT_SHARED:"MICROPHONE_NOT_SHARED",UNSUPPORTED_BROWSER:"UNSUPPORTED_BROWSER",AUTHENTICATION_ERROR:"AUTHENTICATION_ERROR",INVALID_AGENT_STATUS:"INVALID_AGENT_STATUS",CAN_NOT_SET_AGENT_STATUS:"CAN_NOT_SET_AGENT_STATUS",LOGIN_REQUIRED:"LOGIN_REQUIRED",CAN_NOT_ACCEPT_THE_CALL:"CAN_NOT_ACCEPT_THE_CALL",CAN_NOT_DECLINE_THE_CALL:"CAN_NOT_DECLINE_THE_CALL",CAN_NOT_END_THE_CALL:"CAN_NOT_END_THE_CALL",CAN_NOT_HOLD_CALL:"CAN_NOT_HOLD_CALL",CAN_NOT_RESUME_CALL:"CAN_NOT_RESUME_CALL",CAN_NOT_MUTE_CALL:"CAN_NOT_MUTE_CALL",CAN_NOT_UNMUTE_CALL:"CAN_NOT_UNMUTE_CALL",CAN_NOT_TOGGLE_MUTE:"CAN_NOT_TOGGLE_MUTE",CAN_NOT_TOGGLE_HOLD:"CAN_NOT_TOGGLE_HOLD",CAN_NOT_TOGGLE_RECORD:"CAN_NOT_TOGGLE_RECORD",INVALID_PARTICIPANT:"INVALID_PARTICIPANT",CAN_NOT_LOG_IN:"CAN_NOT_LOG_IN",CAN_NOT_LOG_OUT:"CAN_NOT_LOG_OUT",INVALID_PARAMS:"INVALID_PARAMS",CAN_NOT_GET_PHONE_CONTACTS:"CAN_NOT_GET_PHONE_CONTACTS",CAN_NOT_SWAP_PARTICIPANTS:"CAN_NOT_SWAP_PARTICIPANTS",CAN_NOT_CONFERENCE:"CAN_NOT_CONFERENCE",INVALID_DESTINATION:"INVALID_DESTINATION",INVALID_PHONE_NUMBER:"INVALID_PHONE_NUMBER",CAN_NOT_HANGUP_PARTICIPANT:"CAN_NOT_HANGUP_PARTICIPANT",CAN_NOT_ADD_PARTICIPANT:"CAN_NOT_ADD_PARTICIPANT",CAN_NOT_CONNECT_PARTICIPANT:"CAN_NOT_CONNECT_PARTICIPANT",CAN_NOT_START_THE_CALL:"CAN_NOT_START_THE_CALL",CAN_NOT_PAUSE_RECORDING:"CAN_NOT_PAUSE_RECORDING",CAN_NOT_RESUME_RECORDING:"CAN_NOT_RESUME_RECORDING",CAN_NOT_SET_AGENT_CONFIG:"CAN_NOT_SET_AGENT_CONFIG",CAN_NOT_UPDATE_PHONE_NUMBER:"CAN_NOT_UPDATE_PHONE_NUMBER",CAN_NOT_GET_SIGNED_RECORDING_URL:"CAN_NOT_GET_SIGNED_RECORDING_URL"},AGENT_STATUS:{ONLINE:"Online",OFFLINE:"Offline",ACW:"AfterCallWork",CALLBACK_MISSED_OR_REJECTED:"CallbackMissedOrRejected"},PARTICIPANT_TYPE:{AGENT:"Agent",INITIAL_CALLER:"Initial_Caller",THIRD_PARTY:"Third_Party"},CALL_TYPE:{INBOUND:"Inbound",OUTBOUND:"Outbound",CALLBACK:"Callback",ADD_PARTICIPANT:"AddParticipant"},CONTACT_TYPE:{PHONEBOOK:"PhoneBook",QUEUE:"Queue",PHONENUMBER:"PhoneNumber",AGENT:"Agent"},AGENT_CONFIG_TYPE:{SHOW_AGENT_SETTINGS:"SHOW_AGENT_SETTINGS",MUTE:"MUTE",RECORD:"RECORD",MERGE:"MERGE",SWAP:"SWAP",PHONES:"PHONES",SELECTED_PHONE:"SELECTED_PHONE",SIGNED_RECORDING_URL:"SIGNED_RECORDING_URL"},CALL_STATE:{RINGING:"ringing",CONNECTED:"connected",TRANSFERRING:"transferring",TRANSFERRED:"transferred",ENDED:"ended"},PHONE_TYPE:{DESK_PHONE:"DESK_PHONE",SOFT_PHONE:"SOFT_PHONE"},HANGUP_REASON:{PHONE_CALL_ERROR:"error",PHONE_CALL_ENDED:"ended"}},N=E(3),s=E.n(N),c=E(5),A=E.n(c),l=E(0),R=E.n(l);function u(t,e){var E=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),E.push.apply(E,r)}return E}function P(t){for(var e=1;e<arguments.length;e++){var E=null!=arguments[e]?arguments[e]:{};e%2?u(Object(E),!0).forEach((function(e){a()(t,e,E[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(E)):u(Object(E)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(E,e))}))}return t}var O,C,d={EVENT_TYPE:{LOGIN_RESULT:i.EVENT_TYPE.LOGIN_RESULT,LOGOUT_RESULT:i.EVENT_TYPE.LOGOUT_RESULT,CALL_STARTED:i.EVENT_TYPE.CALL_STARTED,QUEUED_CALL_STARTED:i.EVENT_TYPE.QUEUED_CALL_STARTED,CALL_CONNECTED:i.EVENT_TYPE.CALL_CONNECTED,HANGUP:i.EVENT_TYPE.HANGUP,MUTE_TOGGLE:i.EVENT_TYPE.MUTE_TOGGLE,HOLD_TOGGLE:i.EVENT_TYPE.HOLD_TOGGLE,RECORDING_TOGGLE:i.EVENT_TYPE.RECORDING_TOGGLE,PARTICIPANTS_SWAPPED:i.EVENT_TYPE.PARTICIPANTS_SWAPPED,PARTICIPANTS_CONFERENCED:i.EVENT_TYPE.PARTICIPANTS_CONFERENCED,PARTICIPANT_ADDED:i.EVENT_TYPE.PARTICIPANT_ADDED,PARTICIPANT_CONNECTED:i.EVENT_TYPE.PARTICIPANT_CONNECTED,PARTICIPANT_REMOVED:i.EVENT_TYPE.PARTICIPANT_REMOVED,MESSAGE:i.EVENT_TYPE.MESSAGE,AFTER_CALL_WORK_STARTED:i.EVENT_TYPE.AFTER_CALL_WORK_STARTED,WRAP_UP_ENDED:i.EVENT_TYPE.WRAP_UP_ENDED,ERROR_RESULT:i.EVENT_TYPE.ERROR_RESULT},ERROR_TYPE:{GENERIC_ERROR:i.ERROR_TYPE.GENERIC_ERROR,INVALID_PARTICIPANT:i.ERROR_TYPE.INVALID_PARTICIPANT,INVALID_DESTINATION:i.ERROR_TYPE.INVALID_DESTINATION,INVALID_PARAMS:i.ERROR_TYPE.INVALID_PARAMS,INVALID_AGENT_STATUS:i.ERROR_TYPE.INVALID_AGENT_STATUS,CAN_NOT_UPDATE_PHONE_NUMBER:i.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER},AGENT_STATUS:P({},i.AGENT_STATUS),PARTICIPANT_TYPE:P({},i.PARTICIPANT_TYPE),CALL_TYPE:P({},i.CALL_TYPE),CONTACT_TYPE:P({},i.CONTACT_TYPE),CALL_STATE:P({},i.CALL_STATE),HANGUP_REASON:P({},i.HANGUP_REASON),PHONE_TYPE:P({},i.PHONE_TYPE)},I=function t(e){var E=e.type,r=e.number;R()(this,t),k.validateEnum(E,Object.values(i.PHONE_TYPE)),r&&k.validateString(r),this.type=E,this.number=r},L=function t(e){var E=e.isMuted;R()(this,t),this.isMuted=E},S=function t(e){var E=e.activeCalls,r=void 0===E?[]:E;R()(this,t),r.length>0&&r.forEach((function(t){k.validateClassObject(t,x)})),this.activeCalls=r},p=function t(e){var E=e.hasMute,r=void 0===E||E,a=e.hasRecord,n=void 0===a||a,T=e.hasMerge,_=void 0===T||T,o=e.hasSwap,i=void 0===o||o,N=e.hasSignedRecordingUrl,s=void 0!==N&&N,c=e.phones,A=void 0===c?[]:c,l=e.selectedPhone;R()(this,t),k.validateBoolean(r),k.validateBoolean(n),k.validateBoolean(_),k.validateBoolean(i),k.validateBoolean(i),k.validateBoolean(s),k.validateClassObject(A,Array),l&&k.validateClassObject(l,I),this.hasMute=r,this.hasRecord=n,this.hasMerge=_,this.hasSwap=i,this.hasSignedRecordingUrl=s,this.phones=A,this.selectedPhone=l},h=function t(e){var E=e.selectedPhone;R()(this,t),k.validateClassObject(E,I),this.selectedPhone=E},G=function t(e){var E=e.isRecordingPaused,r=e.contactId,a=void 0===r?null:r,n=e.initialContactId,T=void 0===n?null:n,_=e.instanceId,o=void 0===_?null:_,i=e.region,N=void 0===i?null:i;R()(this,t),this.isRecordingPaused=E,this.contactId=a,this.initialContactId=T,this.instanceId=o,this.region=N},D=function t(e){var E=e.initialCallHasEnded,r=e.callInfo,a=e.phoneNumber,n=e.callId;R()(this,t),k.validateClassObject(r,M),this.initialCallHasEnded=E,this.callInfo=r,this.phoneNumber=a,this.callId=n},f=function t(e){var E=e.contacts,r=void 0===E?[]:E;R()(this,t),r.length>0&&r.forEach((function(t){k.validateClassObject(t,m)})),this.contacts=r},b=function t(e){var E=e.call;R()(this,t),void 0!==E&&k.validateClassObject(E,x),this.call=E},v=function t(e){var E=e.calls;R()(this,t),E instanceof Array?(E.forEach((function(t){return k.validateClassObject(t,x)})),this.calls=E):(k.validateClassObject(E,x),this.calls=[E])},Y=function t(e){var E=e.isThirdPartyOnHold,r=e.isCustomerOnHold,a=e.calls;R()(this,t),a&&(Object.values(a).forEach((function(t){k.validateClassObject(t,x)})),this.calls=a),this.isThirdPartyOnHold=E,this.isCustomerOnHold=r},U=function t(e){var E=e.success,r=e.url,a=e.duration,n=e.callId;R()(this,t),E&&(k.validateString(r),k.validateString(n),a&&k.validateNumber(a)),this.success=E,this.url=r,this.duration=a,this.callId=n},g=function t(e){var E=e.showLogin,r=void 0!==E&&E,a=e.loginFrameHeight,n=void 0===a?350:a;R()(this,t),this.showLogin=r,this.loginFrameHeight=n},y=function t(e){var E=e.success;R()(this,t),this.success=E},V=function t(e){var E=e.success,r=e.loginFrameHeight,a=void 0===r?350:r;R()(this,t),this.success=E,this.loginFrameHeight=a},M=function t(e){var E=e.callStateTimestamp,r=void 0===E?null:E,a=e.isOnHold,n=e.isMuted,T=void 0!==n&&n,_=e.isRecordingPaused,o=void 0!==_&&_,i=e.initialCallId,N=e.isSoftphoneCall,s=void 0===N||N,c=e.acceptEnabled,A=void 0===c||c,l=e.declineEnabled,u=void 0===l||l,P=e.muteEnabled,O=void 0===P||P,C=e.swapEnabled,d=void 0===C||C,I=e.conferenceEnabled,L=void 0===I||I,S=e.holdEnabled,p=void 0===S||S,h=e.recordEnabled,G=void 0===h||h,D=e.addCallerEnabled,f=void 0===D||D,b=e.extensionEnabled,v=void 0===b||b,Y=e.isReplayable,U=void 0===Y||Y;R()(this,t),r&&k.validateDate(r),k.validateBoolean(o),k.validateBoolean(T),k.validateBoolean(s),k.validateBoolean(A),k.validateBoolean(u),k.validateBoolean(O),k.validateBoolean(d),k.validateBoolean(L),k.validateBoolean(p),k.validateBoolean(G),k.validateBoolean(f),k.validateBoolean(v),this.callStateTimestamp=r,this.isRecordingPaused=o,this.isMuted=T,this.isOnHold=a,this.initialCallId=i,this.isSoftphoneCall=s,this.acceptEnabled=A,this.declineEnabled=u,this.muteEnabled=O,this.swapEnabled=d,this.conferenceEnabled=L,this.holdEnabled=p,this.recordEnabled=G,this.addCallerEnabled=f,this.extensionEnabled=v,this.isReplayable=U},m=function t(e){var E=e.phoneNumber,r=e.id,a=e.type,n=e.name,T=e.prefix,_=e.extension,o=e.endpointARN,N=e.queue;R()(this,t),E&&k.validateString(E),a&&k.validateEnum(a,Object.values(i.CONTACT_TYPE)),r&&k.validateString(r),n&&k.validateString(n),T&&k.validateString(T),_&&k.validateString(_),this.phoneNumber=E,this.id=r,this.type=a,this.name=n,this.prefix=T,this.extension=_,this.endpointARN=o,this.queue=N},H=function t(e){var E=e.voiceCallId,r=e.participantType,a=e.parentId,n=e.isOnHold;R()(this,t),E&&k.validateString(E),r&&k.validateEnum(r,Object.values(i.PARTICIPANT_TYPE)),a&&k.validateString(a),void 0!==n&&k.validateBoolean(n),this.voiceCallId=E,this.participantType=r,this.parentId=a,this.isOnHold=n},x=function t(e){var E=e.callId,r=e.callType,a=e.contact,n=e.state,T=e.callAttributes,_=e.phoneNumber,o=e.callInfo,N=e.reason,s=e.closeCallOnError,c=e.agentStatus;R()(this,t),E&&(k.validateString(E),this.callId=E),r&&(k.validateEnum(r,Object.values(i.CALL_TYPE)),this.callType=r),_&&(k.validateString(_),this.phoneNumber=_),o&&(k.validateClassObject(o,M),this.callInfo=o),a&&(k.validateClassObject(a,m),this.contact=a),N&&(this.reason=N),s&&(this.closeCallOnError=s),c&&(this.agentStatus=c),this.state=n,this.callAttributes=T},k=function(){function t(){R()(this,t)}return A()(t,null,[{key:"validateString",value:function(t){if("string"!=typeof t)throw new Error("Invalid argument. Expecting a string but got ".concat(s()(t)));return this}},{key:"validateNumber",value:function(t){if("number"!=typeof t)throw new Error("Invalid argument. Expecting a number but got ".concat(s()(t)));return this}},{key:"validateBoolean",value:function(t){if("boolean"!=typeof t)throw new Error("Invalid argument. Expecting a boolean but got ".concat(s()(t)));return this}},{key:"validateEnum",value:function(t,e){if(!new RegExp(e.join("|"),"i").test(t))throw new Error("Invalid argument. Expecting a value from ".concat(JSON.stringify(e)," but got ").concat(t));return this}},{key:"validateDate",value:function(t){if(!(t instanceof Date))throw new Error("Invalid argument. Expecting a Date object but got ".concat(s()(t)));return this}},{key:"validateClassObject",value:function(t,e){if(!(t instanceof e))throw new Error("Invalid className. Expecting object of class ".concat(e," but got ").concat(s()(t)));return this}}]),t}(),w=function t(e){var E=e.statusId,r=e.statusApiName,a=e.statusName;R()(this,t),k.validateString(E),k.validateString(r),k.validateString(a),this.statusId=E,this.statusApiName=r,this.statusName=a};function j(t){return t&&t.type?t.type:t}function F(t){return t&&t.message?t.message:t}function B(t,e,E){O.postMessage({type:i.MESSAGE_TYPE.LOG,payload:{eventType:t,payload:e,isError:E}})}function W(t,e){var E=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];O.postMessage({type:i.MESSAGE_TYPE.TELEPHONY_EVENT_DISPATCHED,payload:{telephonyEventType:t,telephonyEventPayload:e}}),E&&B(t,e,!1)}function K(t,e,E){console.error("SCV dispatched error ".concat(t," for eventType ").concat(E),e),W(i.EVENT_TYPE.ERROR,{message:i.ERROR_TYPE[t]}),B(E,{errorType:t,error:e},!0)}function Q(){return q.apply(this,arguments)}function q(){return(q=T()(o.a.mark((function t(){var e,E,r,n,T,_;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.getAgentConfig();case 3:return E=t.sent,k.validateClassObject(E,p),t.next=7,C.getActiveCalls();case 7:r=t.sent,k.validateClassObject(r,S),n=r.activeCalls,T=i.MESSAGE_TYPE.CONNECTOR_READY,_={agentConfig:(e={},a()(e,i.AGENT_CONFIG_TYPE.MUTE,E.hasMute),a()(e,i.AGENT_CONFIG_TYPE.RECORD,E.hasRecord),a()(e,i.AGENT_CONFIG_TYPE.MERGE,E.hasMerge),a()(e,i.AGENT_CONFIG_TYPE.SWAP,E.hasSwap),a()(e,i.AGENT_CONFIG_TYPE.PHONES,E.phones),a()(e,i.AGENT_CONFIG_TYPE.SIGNED_RECORDING_URL,E.hasSignedRecordingUrl),a()(e,i.AGENT_CONFIG_TYPE.SELECTED_PHONE,E.selectedPhone),e),callInProgress:n.length>0?n[0]:null},O.postMessage({type:T,payload:_}),B(T,_,!1),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),O.postMessage({type:i.MESSAGE_TYPE.CONNECTOR_READY,payload:{}}),B(i.MESSAGE_TYPE.CONNECTOR_READY,{},!1);case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function J(t){return z.apply(this,arguments)}function z(){return(z=T()(o.a.mark((function t(e){var E,r,a,n,T,_,N,s,c,A,l,R,u,P,O,d,I,L,p,h,G,D,Y,g,M,H,x,w,Q,q,J,z,$,X,Z,tt,et,rt;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B(E=e.data.type,e.data,!1),t.t0=E,t.next=t.t0===i.MESSAGE_TYPE.ACCEPT_CALL?5:t.t0===i.MESSAGE_TYPE.DECLINE_CALL?20:t.t0===i.MESSAGE_TYPE.END_CALL?33:t.t0===i.MESSAGE_TYPE.MUTE?49:t.t0===i.MESSAGE_TYPE.UNMUTE?60:t.t0===i.MESSAGE_TYPE.HOLD?71:t.t0===i.MESSAGE_TYPE.RESUME?88:t.t0===i.MESSAGE_TYPE.SET_AGENT_STATUS?105:t.t0===i.MESSAGE_TYPE.DIAL?125:t.t0===i.MESSAGE_TYPE.SEND_DIGITS?147:t.t0===i.MESSAGE_TYPE.GET_PHONE_CONTACTS?156:t.t0===i.MESSAGE_TYPE.SWAP_PARTICIPANTS?169:t.t0===i.MESSAGE_TYPE.CONFERENCE?180:t.t0===i.MESSAGE_TYPE.ADD_PARTICIPANT?191:t.t0===i.MESSAGE_TYPE.PAUSE_RECORDING?209:t.t0===i.MESSAGE_TYPE.RESUME_RECORDING?220:t.t0===i.MESSAGE_TYPE.LOGOUT?231:t.t0===i.MESSAGE_TYPE.MESSAGE?244:t.t0===i.MESSAGE_TYPE.WRAP_UP_CALL?246:t.t0===i.MESSAGE_TYPE.AGENT_AVAILABLE?248:t.t0===i.MESSAGE_TYPE.SET_AGENT_CONFIG?277:t.t0===i.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL?289:304;break;case 5:if(t.prev=5,!e.data.call||!e.data.call.callType||e.data.call.callType.toLowerCase()!==i.CALL_TYPE.OUTBOUND.toLowerCase()){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,C.acceptCall(e.data.call);case 10:r=t.sent,k.validateClassObject(r,b),W((a=r.call).callType.toLowerCase()===i.CALL_TYPE.CALLBACK.toLowerCase()?i.EVENT_TYPE.CALL_STARTED:i.EVENT_TYPE.CALL_CONNECTED,a),t.next=19;break;case 16:t.prev=16,t.t1=t.catch(5),K(i.ERROR_TYPE.CAN_NOT_ACCEPT_THE_CALL,t.t1,i.MESSAGE_TYPE.ACCEPT_CALL);case 19:return t.abrupt("break",305);case 20:return t.prev=20,t.next=23,C.declineCall(e.data.call);case 23:n=t.sent,k.validateClassObject(n,b),T=n.call,W(i.EVENT_TYPE.HANGUP,T),t.next=32;break;case 29:t.prev=29,t.t2=t.catch(20),K(i.ERROR_TYPE.CAN_NOT_DECLINE_THE_CALL,t.t2,i.MESSAGE_TYPE.DECLINE_CALL);case 32:return t.abrupt("break",305);case 33:return t.prev=33,t.next=36,C.endCall(e.data.call,e.data.agentStatus);case 36:return _=t.sent,t.next=39,C.getActiveCalls();case 39:N=t.sent,k.validateClassObject(N,S),0===N.activeCalls.length&&(k.validateClassObject(_,v),s=_.calls,W(i.EVENT_TYPE.HANGUP,s)),t.next=48;break;case 45:t.prev=45,t.t3=t.catch(33),K(i.ERROR_TYPE.CAN_NOT_END_THE_CALL,t.t3,i.MESSAGE_TYPE.END_CALL);case 48:return t.abrupt("break",305);case 49:return t.prev=49,t.next=52,C.mute();case 52:c=t.sent,Et({eventType:i.EVENT_TYPE.MUTE_TOGGLE,payload:c}),t.next=59;break;case 56:t.prev=56,t.t4=t.catch(49),K(i.ERROR_TYPE.CAN_NOT_MUTE_CALL,t.t4,i.MESSAGE_TYPE.MUTE);case 59:return t.abrupt("break",305);case 60:return t.prev=60,t.next=63,C.unmute();case 63:A=t.sent,Et({eventType:i.EVENT_TYPE.MUTE_TOGGLE,payload:A}),t.next=70;break;case 67:t.prev=67,t.t5=t.catch(60),K(i.ERROR_TYPE.CAN_NOT_UNMUTE_CALL,t.t5,i.MESSAGE_TYPE.UNMUTE);case 70:return t.abrupt("break",305);case 71:return t.prev=71,t.next=74,C.hold(e.data.call);case 74:l=t.sent,Et({eventType:i.EVENT_TYPE.HOLD_TOGGLE,payload:l}),t.next=87;break;case 78:t.prev=78,t.t6=t.catch(71),t.t7=j(t.t6),t.next=t.t7===i.ERROR_TYPE.INVALID_PARTICIPANT?83:85;break;case 83:return K(i.ERROR_TYPE.INVALID_PARTICIPANT,F(t.t6),i.MESSAGE_TYPE.HOLD),t.abrupt("break",87);case 85:return K(i.ERROR_TYPE.CAN_NOT_HOLD_CALL,F(t.t6),i.MESSAGE_TYPE.HOLD),t.abrupt("break",87);case 87:return t.abrupt("break",305);case 88:return t.prev=88,t.next=91,C.resume(e.data.call);case 91:R=t.sent,Et({eventType:i.EVENT_TYPE.HOLD_TOGGLE,payload:R}),t.next=104;break;case 95:t.prev=95,t.t8=t.catch(88),t.t9=j(t.t8),t.next=t.t9===i.ERROR_TYPE.INVALID_PARTICIPANT?100:102;break;case 100:return K(i.ERROR_TYPE.INVALID_PARTICIPANT,F(t.t8),i.MESSAGE_TYPE.RESUME),t.abrupt("break",104);case 102:return K(i.ERROR_TYPE.CAN_NOT_RESUME_CALL,F(t.t8),i.MESSAGE_TYPE.RESUME),t.abrupt("break",104);case 104:return t.abrupt("break",305);case 105:return t.prev=105,u=e.data.statusInfo||{},t.next=109,C.setAgentStatus(e.data.agentStatus,u);case 109:P=t.sent,k.validateClassObject(P,y),O=P.success,W(i.EVENT_TYPE.SET_AGENT_STATUS_RESULT,{success:O}),t.next=124;break;case 115:t.prev=115,t.t10=t.catch(105),t.t11=j(t.t10),t.next=t.t11===i.ERROR_TYPE.INVALID_AGENT_STATUS?120:122;break;case 120:return K(i.ERROR_TYPE.INVALID_AGENT_STATUS,F(t.t10),i.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",124);case 122:return K(i.ERROR_TYPE.CAN_NOT_SET_AGENT_STATUS,F(t.t10),i.MESSAGE_TYPE.SET_AGENT_STATUS),t.abrupt("break",124);case 124:return t.abrupt("break",305);case 125:return t.prev=125,t.next=128,C.dial(new m(e.data.contact));case 128:d=t.sent,k.validateClassObject(d,b),I=d.call,W(i.EVENT_TYPE.CALL_STARTED,I),t.next=146;break;case 134:t.prev=134,t.t12=t.catch(125),W(i.EVENT_TYPE.CALL_FAILED),t.t13=j(t.t12),t.next=t.t13===i.ERROR_TYPE.INVALID_DESTINATION?140:t.t13===i.ERROR_TYPE.GENERIC_ERROR?142:144;break;case 140:return K(i.ERROR_TYPE.INVALID_DESTINATION,F(t.t12),i.MESSAGE_TYPE.DIAL),t.abrupt("break",146);case 142:return K(i.ERROR_TYPE.GENERIC_ERROR,F(t.t12),i.MESSAGE_TYPE.DIAL),t.abrupt("break",146);case 144:return K(i.ERROR_TYPE.CAN_NOT_START_THE_CALL,F(t.t12),i.MESSAGE_TYPE.DIAL),t.abrupt("break",146);case 146:return t.abrupt("break",305);case 147:return t.prev=147,t.next=150,C.sendDigits(e.data.digits);case 150:t.next=155;break;case 152:t.prev=152,t.t14=t.catch(147),B(i.MESSAGE_TYPE.SEND_DIGITS,e.data.digits,!0);case 155:return t.abrupt("break",305);case 156:return t.prev=156,t.next=159,C.getPhoneContacts(e.data.filter);case 159:L=t.sent,k.validateClassObject(L,f),p=L.contacts.map((function(t){return{id:t.id,endpointARN:t.endpointARN,phoneNumber:t.phoneNumber,name:t.name,type:t.type}})),W(i.EVENT_TYPE.PHONE_CONTACTS,{contacts:p}),t.next=168;break;case 165:t.prev=165,t.t15=t.catch(156),K(i.ERROR_TYPE.CAN_NOT_GET_PHONE_CONTACTS,t.t15,i.MESSAGE_TYPE.GET_PHONE_CONTACTS);case 168:return t.abrupt("break",305);case 169:return t.prev=169,t.next=172,C.swap(e.data.callToHold,e.data.callToResume);case 172:h=t.sent,Et({eventType:i.EVENT_TYPE.PARTICIPANTS_SWAPPED,payload:h}),t.next=179;break;case 176:t.prev=176,t.t16=t.catch(169),K(i.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,t.t16,i.MESSAGE_TYPE.SWAP_PARTICIPANTS);case 179:return t.abrupt("break",305);case 180:return t.prev=180,t.next=183,C.conference(e.data.calls);case 183:G=t.sent,Et({eventType:i.EVENT_TYPE.PARTICIPANTS_CONFERENCED,payload:G}),t.next=190;break;case 187:t.prev=187,t.t17=t.catch(180),K(i.ERROR_TYPE.CAN_NOT_CONFERENCE,t.t17,i.MESSAGE_TYPE.CONFERENCE);case 190:return t.abrupt("break",305);case 191:return t.prev=191,t.next=194,C.addParticipant(new m(e.data.contact),e.data.call);case 194:D=t.sent,Et({eventType:i.EVENT_TYPE.PARTICIPANT_ADDED,payload:D}),t.next=208;break;case 198:t.prev=198,t.t18=t.catch(191),W(i.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:i.EVENT_TYPE.ERROR.toLowerCase()}),t.t19=j(t.t18),t.next=t.t19===i.ERROR_TYPE.INVALID_DESTINATION?204:206;break;case 204:return K(i.ERROR_TYPE.INVALID_DESTINATION,F(t.t18),i.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",208);case 206:return K(i.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,F(t.t18),i.MESSAGE_TYPE.ADD_PARTICIPANT),t.abrupt("break",208);case 208:return t.abrupt("break",305);case 209:return t.prev=209,t.next=212,C.pauseRecording(e.data.call);case 212:Y=t.sent,Et({eventType:i.EVENT_TYPE.RECORDING_TOGGLE,payload:Y}),t.next=219;break;case 216:t.prev=216,t.t20=t.catch(209),K(i.ERROR_TYPE.CAN_NOT_PAUSE_RECORDING,t.t20,i.MESSAGE_TYPE.PAUSE_RECORDING);case 219:return t.abrupt("break",305);case 220:return t.prev=220,t.next=223,C.resumeRecording(e.data.call);case 223:g=t.sent,Et({eventType:i.EVENT_TYPE.RECORDING_TOGGLE,payload:g}),t.next=230;break;case 227:t.prev=227,t.t21=t.catch(220),K(i.ERROR_TYPE.CAN_NOT_RESUME_RECORDING,t.t21,i.MESSAGE_TYPE.RESUME_RECORDING);case 230:return t.abrupt("break",305);case 231:return t.prev=231,t.next=234,C.logout();case 234:M=t.sent,k.validateClassObject(M,V),H=M.success,x=M.loginFrameHeight,W(i.EVENT_TYPE.LOGOUT_RESULT,{success:H,loginFrameHeight:x}),t.next=243;break;case 240:t.prev=240,t.t22=t.catch(231),K(i.ERROR_TYPE.CAN_NOT_LOG_OUT,t.t22,i.MESSAGE_TYPE.LOGOUT);case 243:return t.abrupt("break",305);case 244:return C.handleMessage(e.data.message),t.abrupt("break",305);case 246:return C.wrapUpCall(e.data.call),t.abrupt("break",305);case 248:if(!e.data.isAvailable){t.next=276;break}return t.next=252,C.getActiveCalls();case 252:w=t.sent,k.validateClassObject(w,S),Q=w.activeCalls,t.t23=o.a.keys(Q);case 256:if((t.t24=t.t23()).done){t.next=276;break}if(q=t.t24.value,J=Q[q],!(!J.callInfo||J.callInfo.isReplayable)){t.next=274;break}J.isReplayedCall=!0,t.t25=J.state,t.next=t.t25===i.CALL_STATE.CONNECTED?265:t.t25===i.CALL_STATE.RINGING?267:t.t25===i.CALL_STATE.TRANSFERRING?269:t.t25===i.CALL_STATE.TRANSFERRED?271:273;break;case 265:return W(i.EVENT_TYPE.CALL_CONNECTED,J),t.abrupt("break",274);case 267:return W(i.EVENT_TYPE.CALL_STARTED,J),t.abrupt("break",274);case 269:return W(i.EVENT_TYPE.PARTICIPANT_ADDED,{phoneNumber:J.contact.phoneNumber,callInfo:J.callInfo,initialCallHasEnded:J.callAttributes.initialCallHasEnded,callId:J.callId}),t.abrupt("break",274);case 271:return W(i.EVENT_TYPE.PARTICIPANT_CONNECTED,{phoneNumber:J.contact.phoneNumber,callInfo:J.callInfo,initialCallHasEnded:J.callAttributes.initialCallHasEnded,callId:J.callId}),t.abrupt("break",274);case 273:return t.abrupt("break",274);case 274:t.next=256;break;case 276:return t.abrupt("break",305);case 277:return t.prev=277,t.next=280,C.setAgentConfig(e.data.config);case 280:z=t.sent,k.validateClassObject(z,y),W(i.EVENT_TYPE.AGENT_CONFIG_UPDATED,z),t.next=288;break;case 285:t.prev=285,t.t26=t.catch(277),K(j(t.t26)===i.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER?i.ERROR_TYPE.CAN_NOT_UPDATE_PHONE_NUMBER:i.ERROR_TYPE.CAN_NOT_SET_AGENT_CONFIG,F(t.t26),i.MESSAGE_TYPE.SET_AGENT_CONFIG);case 288:return t.abrupt("break",305);case 289:return t.prev=289,$=e.data,X=$.recordingUrl,Z=$.vendorCallKey,tt=$.callId,t.next=293,C.getSignedRecordingUrl(X,Z,tt);case 293:et=t.sent,k.validateClassObject(et,U),W(i.EVENT_TYPE.SIGNED_RECORDING_URL,et),t.next=303;break;case 298:t.prev=298,t.t27=t.catch(289),rt=new U({success:!1}),W(i.EVENT_TYPE.SIGNED_RECORDING_URL,rt,!1),B(i.MESSAGE_TYPE.GET_SIGNED_RECORDING_URL,rt,!0);case 303:case 304:return t.abrupt("break",305);case 305:case"end":return t.stop()}}),t,null,[[5,16],[20,29],[33,45],[49,56],[60,67],[71,78],[88,95],[105,115],[125,134],[147,152],[156,165],[169,176],[180,187],[191,198],[209,216],[220,227],[231,240],[277,285],[289,298]])})))).apply(this,arguments)}function $(t){return X.apply(this,arguments)}function X(){return(X=T()(o.a.mark((function t(e){var E;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.data.type,t.next=t.t0===i.MESSAGE_TYPE.SETUP_CONNECTOR?3:27;break;case 3:if(!/^http[s]?:\/\/[\w-.]+(\.lightning\.force\.com|\.lightning\.pc-rnd\.force\.com|\.stm\.force\.com|\.salesforce\.com)$/.test(e.origin)){t.next=25;break}return(O=e.ports[0]).onmessage=J,B(i.MESSAGE_TYPE.SETUP_CONNECTOR,null,!1),t.prev=8,t.next=11,C.init(e.data.connectorConfig);case 11:E=t.sent,k.validateClassObject(E,g),E.showLogin?W(i.EVENT_TYPE.SHOW_LOGIN,{loginFrameHeight:E.loginFrameHeight}):Q(),t.next=25;break;case 16:t.prev=16,t.t1=t.catch(8),t.t2=j(t.t1),t.next=t.t2===i.ERROR_TYPE.INVALID_PARAMS?21:23;break;case 21:return K(i.ERROR_TYPE.INVALID_PARAMS,F(t.t1),i.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",25);case 23:return K(i.ERROR_TYPE.CAN_NOT_LOG_IN,F(t.t1),i.MESSAGE_TYPE.SETUP_CONNECTOR),t.abrupt("break",25);case 25:return window.removeEventListener("message",$),t.abrupt("break",28);case 27:return t.abrupt("break",28);case 28:case"end":return t.stop()}}),t,null,[[8,16]])})))).apply(this,arguments)}function Z(t,e,E,r){try{return k.validateClassObject(t,e),!0}catch(t){return E&&K(E,t,r),!1}}function tt(t){C=t,window.addEventListener("message",$)}function et(t){var e=t.eventType,E=t.error;switch(e){case i.EVENT_TYPE.LOGIN_RESULT:K(i.ERROR_TYPE.CAN_NOT_LOG_IN,E,i.EVENT_TYPE.LOGIN_RESULT);break;case i.EVENT_TYPE.LOGOUT_RESULT:K(i.ERROR_TYPE.CAN_NOT_LOG_OUT,E,i.EVENT_TYPE.LOGOUT_RESULT);break;case i.EVENT_TYPE.CALL_STARTED:K(i.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,i.EVENT_TYPE.CALL_STARTED);break;case i.EVENT_TYPE.QUEUED_CALL_STARTED:K(i.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,i.EVENT_TYPE.QUEUED_CALL_STARTED);break;case i.EVENT_TYPE.CALL_CONNECTED:K(i.ERROR_TYPE.CAN_NOT_START_THE_CALL,E,i.EVENT_TYPE.CALL_CONNECTED);break;case i.EVENT_TYPE.HANGUP:K(i.ERROR_TYPE.CAN_NOT_END_THE_CALL,E,i.EVENT_TYPE.HANGUP);break;case i.EVENT_TYPE.PARTICIPANT_ADDED:K(j(E)===i.ERROR_TYPE.INVALID_PARTICIPANT?i.ERROR_TYPE.INVALID_PARTICIPANT:i.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,E,i.EVENT_TYPE.PARTICIPANT_ADDED);break;case i.EVENT_TYPE.PARTICIPANT_CONNECTED:K(i.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,E,i.EVENT_TYPE.PARTICIPANT_CONNECTED);break;case i.EVENT_TYPE.PARTICIPANT_REMOVED:K(i.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,E,i.EVENT_TYPE.PARTICIPANT_REMOVED);break;case i.EVENT_TYPE.MUTE_TOGGLE:K(i.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,E,i.EVENT_TYPE.MUTE_TOGGLE);break;case i.EVENT_TYPE.HOLD_TOGGLE:K(j(E)===i.ERROR_TYPE.INVALID_PARTICIPANT?i.ERROR_TYPE.INVALID_PARTICIPANT:i.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,E,i.EVENT_TYPE.HOLD_TOGGLE);break;case i.EVENT_TYPE.RECORDING_TOGGLE:K(i.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,E,i.EVENT_TYPE.RECORDING_TOGGLE);break;case i.EVENT_TYPE.PARTICIPANTS_SWAPPED:K(i.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,E,i.EVENT_TYPE.PARTICIPANTS_SWAPPED);break;case i.EVENT_TYPE.PARTICIPANTS_CONFERENCED:K(i.ERROR_TYPE.CAN_NOT_CONFERENCE,E,i.EVENT_TYPE.PARTICIPANTS_CONFERENCED);break;case i.EVENT_TYPE.ERROR_RESULT:K(i.ERROR_TYPE.AGENT_ERROR,E,i.EVENT_TYPE.ERROR_RESULT);break;default:console.error("Unhandled error scenario with arguments ",arguments)}}function Et(t){return rt.apply(this,arguments)}function rt(){return(rt=T()(o.a.mark((function t(e){var E,r,a,n,T,_,N,s,c,A,l,R,u,P,O,d,I,p,h,f,U,g,M,m,H,x,k;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E=e.eventType,r=e.payload,t.t0=E,t.next=t.t0===i.EVENT_TYPE.LOGIN_RESULT?4:t.t0===i.EVENT_TYPE.LOGOUT_RESULT?6:t.t0===i.EVENT_TYPE.CALL_STARTED?8:t.t0===i.EVENT_TYPE.QUEUED_CALL_STARTED?10:t.t0===i.EVENT_TYPE.CALL_CONNECTED?12:t.t0===i.EVENT_TYPE.HANGUP?14:t.t0===i.EVENT_TYPE.PARTICIPANT_ADDED?16:t.t0===i.EVENT_TYPE.PARTICIPANT_CONNECTED?18:t.t0===i.EVENT_TYPE.PARTICIPANT_REMOVED?20:t.t0===i.EVENT_TYPE.MESSAGE?27:t.t0===i.EVENT_TYPE.AFTER_CALL_WORK_STARTED?29:t.t0===i.EVENT_TYPE.WRAP_UP_ENDED?31:t.t0===i.EVENT_TYPE.REMOTE_CONTROLLER?33:t.t0===i.EVENT_TYPE.MUTE_TOGGLE?35:t.t0===i.EVENT_TYPE.HOLD_TOGGLE?37:t.t0===i.EVENT_TYPE.RECORDING_TOGGLE?40:t.t0===i.EVENT_TYPE.PARTICIPANTS_SWAPPED?43:t.t0===i.EVENT_TYPE.PARTICIPANTS_CONFERENCED?45:47;break;case 4:return Z(r,y,i.ERROR_TYPE.CAN_NOT_LOG_IN,i.EVENT_TYPE.LOGIN_RESULT)&&(W(i.EVENT_TYPE.LOGIN_RESULT,r),r.success&&Q()),t.abrupt("break",47);case 6:return Z(r,V,i.ERROR_TYPE.CAN_NOT_LOG_OUT,i.EVENT_TYPE.LOGOUT_RESULT)&&W(i.EVENT_TYPE.LOGOUT_RESULT,{success:r.success,loginFrameHeight:r.loginFrameHeight}),t.abrupt("break",47);case 8:return Z(r,b,i.ERROR_TYPE.CAN_NOT_START_THE_CALL,i.EVENT_TYPE.CALL_STARTED)&&W(i.EVENT_TYPE.CALL_STARTED,r.call),t.abrupt("break",47);case 10:return Z(r,b,i.ERROR_TYPE.CAN_NOT_START_THE_CALL,i.EVENT_TYPE.QUEUED_CALL_STARTED)&&W(i.EVENT_TYPE.QUEUED_CALL_STARTED,r.call),t.abrupt("break",47);case 12:return Z(r,b,i.ERROR_TYPE.CAN_NOT_START_THE_CALL,i.EVENT_TYPE.CALL_CONNECTED)&&W(i.EVENT_TYPE.CALL_CONNECTED,r.call),t.abrupt("break",47);case 14:return Z(r,v,i.ERROR_TYPE.CAN_NOT_END_THE_CALL,i.EVENT_TYPE.HANGUP)&&W(i.EVENT_TYPE.HANGUP,r.calls),t.abrupt("break",47);case 16:return Z(r,D,i.ERROR_TYPE.CAN_NOT_ADD_PARTICIPANT,i.EVENT_TYPE.PARTICIPANT_ADDED)&&(a=r.initialCallHasEnded,n=r.callInfo,T=r.phoneNumber,_=r.callId,W(i.EVENT_TYPE.PARTICIPANT_ADDED,{initialCallHasEnded:a,callInfo:n,phoneNumber:T,callId:_})),t.abrupt("break",47);case 18:return Z(r,D,i.ERROR_TYPE.CAN_NOT_CONNECT_PARTICIPANT,i.EVENT_TYPE.PARTICIPANT_CONNECTED)&&(N=r.initialCallHasEnded,s=r.callInfo,c=r.phoneNumber,A=r.callId,W(i.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:N,callInfo:s,phoneNumber:c,callId:A})),t.abrupt("break",47);case 20:if(!Z(r,b,i.ERROR_TYPE.CAN_NOT_HANGUP_PARTICIPANT,i.EVENT_TYPE.PARTICIPANT_REMOVED)){t.next=26;break}return l=r.call,t.next=24,C.getActiveCalls();case 24:Z(R=t.sent,S)&&(0===(u=R.activeCalls).length?W(i.EVENT_TYPE.HANGUP,l):l&&l.callAttributes&&l.callAttributes.participantType===i.PARTICIPANT_TYPE.INITIAL_CALLER?(P=Object.values(u).filter((function(t){return t.callType===i.CALL_TYPE.ADD_PARTICIPANT})).pop(),W(P.state===i.CALL_STATE.TRANSFERRING?i.EVENT_TYPE.PARTICIPANT_ADDED:i.EVENT_TYPE.PARTICIPANT_CONNECTED,{initialCallHasEnded:!0})):W(i.EVENT_TYPE.PARTICIPANT_REMOVED,{reason:l?l.reason:null}));case 26:return t.abrupt("break",47);case 27:return W(i.EVENT_TYPE.MESSAGE,r),t.abrupt("break",47);case 29:return W(i.EVENT_TYPE.AFTER_CALL_WORK_STARTED,r),t.abrupt("break",47);case 31:return W(i.EVENT_TYPE.WRAP_UP_ENDED,r),t.abrupt("break",47);case 33:return J(r),t.abrupt("break",47);case 35:return Z(r,L,i.ERROR_TYPE.CAN_NOT_TOGGLE_MUTE,i.EVENT_TYPE.MUTE_TOGGLE)&&W(i.EVENT_TYPE.MUTE_TOGGLE,r),t.abrupt("break",47);case 37:return O=r.isThirdPartyOnHold,d=r.isCustomerOnHold,I=r.calls,Z(r,Y,i.ERROR_TYPE.CAN_NOT_TOGGLE_HOLD,i.EVENT_TYPE.HOLD_TOGGLE)&&W(i.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:O,isCustomerOnHold:d,calls:I}),t.abrupt("break",47);case 40:return p=r.isRecordingPaused,h=r.contactId,f=r.initialContactId,U=r.instanceId,g=r.region,Z(r,G,i.ERROR_TYPE.CAN_NOT_TOGGLE_RECORD,i.EVENT_TYPE.RECORDING_TOGGLE)&&W(i.EVENT_TYPE.RECORDING_TOGGLE,{isRecordingPaused:p,contactId:h,initialContactId:f,instanceId:U,region:g}),t.abrupt("break",47);case 43:return Z(r,Y,i.ERROR_TYPE.CAN_NOT_SWAP_PARTICIPANTS,i.EVENT_TYPE.PARTICIPANTS_SWAPPED)&&(M=r.isThirdPartyOnHold,m=r.isCustomerOnHold,H=r.calls,W(i.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:M,isCustomerOnHold:m,calls:H})),t.abrupt("break",47);case 45:return Z(r,Y,i.ERROR_TYPE.CAN_NOT_CONFERENCE,i.EVENT_TYPE.PARTICIPANTS_CONFERENCED)&&(x=r.isThirdPartyOnHold,k=r.isCustomerOnHold,W(i.EVENT_TYPE.HOLD_TOGGLE,{isThirdPartyOnHold:x,isCustomerOnHold:k})),t.abrupt("break",47);case 47:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}])}));